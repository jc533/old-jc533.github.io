<html>
  <head>
    <script src="js/fdb-all.js"></script>
  </head>
  <body>
    <script>
      function randname(id,numbers){
        var x = id;
        var stu = []
        var s = []
        for(var i=0;i<numbers;i++)
          x++;
          stu.push(new person(names[rnd(0,5)],rnd(0,5),x))
          s.push(new Score(x,rnd(0,100)))
          stuCollection.insert(stu[i]);
          console.log(stu,stuCollection.find(),x)
          stusCollection.insert(s[i]);
          
      }
      function person(name,age,id){
        this.age = age
        this.name = name
        this.id = id
      }
      function Score(id,s){
        this.id = id
        this.score = s
      }
      function rnd(min, max) {
        return Math.floor(Math.random() * max) + min;
      }
      var fdb = new ForerunnerDB();
      var db = fdb.db("db");
      var p1 = new person("Helen",10,1);
      var p2 = new person("Jack",10,2);
      var stuCollection = db.collection('student');
      var stusCollection = db.collection('score');
//       stuCollection.insert(p1);
//       stuCollection.insert(p2);
      stuCollection.load();
      stusCollection.load(afterload);
//       afterload()
      function search_grade(list,id){
        var grades = []
        for(var idx = 0;idx<list.length;idx++){
          if(list[idx].id == id){
            grades.push(list[idx].score);
//             console.log(idx)
          }
        }
        return grades 
      }
      var names = ["Aaron","Aaron","Abel","Abner","Abraham"]
      function afterload(){
        var grade = stusCollection.find();
        var people = stuCollection.find();
        for(var i = 0;i<people.length;i++){
          var p = people[i];
          var grades = search_grade(grade,p.id)
          console.log(p,grades);
        }
      }
    </script>
  </body>
</html>
